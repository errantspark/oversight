<head>
  <link rel="stylesheet" href="style.css">
  <script src="lib.js"></script>
  <script src="chroma.min.js"></script>
</head>
<body>
  <div id="container">
  </div>
  <script>
    function httpGet(theUrl)

{
  var xmlHttp = new XMLHttpRequest();
  xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
  xmlHttp.send( null );
  return xmlHttp.responseText;
}
let spect = chroma.scale('Spectral')
let projects = JSON.parse(httpGet('/update'))
  projects = projects.filter(proj => !proj.hasGit || proj.gitUrl.match(/errantspark/))
let meta = getMeta(projects)
let timeToF = rescale(meta.oldest,meta.newest)

projects.sort((a,b) => b.date - a.date)
projects.forEach(p => {
  let container = document.getElementById('container')
  let d = document.createElement('div')
      x = p.date
  
  d.innerHTML = p.name
  d.classList.add('project')
    let c = timeToF(x)
  d.style.background = spect(c).hex()

    container.appendChild(d)
})
</script>
</body>
